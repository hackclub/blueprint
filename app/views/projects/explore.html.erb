<section class="flex justify-center">
  <div class="w-full max-w-6xl space-y-4">
    <div class="flex items-end py-4 space-x-2">
      <div class="space-y-1">
        <h1 class="text-5xl">Explore</h1>
        <p class="text-xl">Here's what the community is up to</p>
      </div>
      <div class="flex flex-col items-end ml-auto space-y-3 font-rc-full">
        <div class="flex bg-bp-dark border-2 border-white/25 p-1">
          <%= link_to "Journals", explore_path(type: "journals", sort: params[:sort], q: params[:q]),
            class: "px-6 py-2 font-bold transition-all #{(params[:type] == "journals" || params[:type].nil?) ? "bg-white text-bp-dark" : "text-white hover:bg-white/10"}",
            data: { turbo_frame: "_top" } %>
          <%= link_to "Projects", explore_path(type: "projects", sort: params[:sort], q: params[:q]),
            class: "px-6 py-2 font-bold transition-all #{params[:type] == "projects" ? "bg-white text-bp-dark" : "text-white hover:bg-white/10"}",
            data: { turbo_frame: "_top" } %>
        </div>
        <div class="flex bg-bp-dark border-2 border-white/25 p-1">
          <% if current_user %>
            <%= link_to "For You", explore_path(sort: "you", type: params[:type], q: params[:q]),
              class: "px-4 py-1.5 text-sm font-bold transition-all #{params[:sort] == "you" ? "bg-white text-bp-dark" : "text-white hover:bg-white/10"}",
              data: { turbo_frame: "_top" } %>
          <% end %>
          <%= link_to "Top", explore_path(sort: "top", type: params[:type], q: params[:q]),
            class: "px-4 py-1.5 text-sm font-bold transition-all #{params[:sort] == "top" ? "bg-white text-bp-dark" : "text-white hover:bg-white/10"}",
            data: { turbo_frame: "_top" } %>
          <% if params[:type] == "projects" %>
            <%= link_to "Shipped", explore_path(sort: "shipped", type: params[:type], q: params[:q]),
              class: "px-4 py-1.5 text-sm font-bold transition-all #{params[:sort] == "shipped" ? "bg-white text-bp-dark" : "text-white hover:bg-white/10"}",
              data: { turbo_frame: "_top" } %>
          <% end %>
          <%= link_to "New", explore_path(sort: "new", type: params[:type], q: params[:q]),
            class: "px-4 py-1.5 text-sm font-bold transition-all #{params[:sort] == "new" ? "bg-white text-bp-dark" : "text-white hover:bg-white/10"}",
            data: { turbo_frame: "_top" } %>
        </div>
        <%= form_with url: explore_path, method: :get, local: true,
                      class: "flex bg-bp-dark border-2 border-white/25 p-1",
                      data: { turbo_frame: "_top" } do %>
          <%= hidden_field_tag :type, params[:type].presence || "journals" %>
          <%= hidden_field_tag :sort, params[:sort].presence || "top" %>
          <%= text_field_tag :q, params[:q],
                placeholder: "Search #{params[:type] == 'projects' ? 'projects' : 'journals'}...",
                class: "input bg-bp-darker text-white border-white rounded-none placeholder-white/60 px-3 py-1 text-sm flex-1" %>
        <% end %>
      </div>
    </div>
    <% if params[:type] == "journals" || params[:type].nil? %>
      <%= render "explore_entries" %>
    <% elsif params[:type] == "projects" %>
      <%= render "explore_projects" %>
    <% end %>
  </div>
</section>
